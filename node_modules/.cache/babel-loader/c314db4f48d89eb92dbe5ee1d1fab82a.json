{"ast":null,"code":"var _jsxFileName = \"/home/julia/Trybe/projects_Trybe/sd-06-project-recipes-app/src/pages/FoodDetails.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { requestDetailsFood, requestDrinks } from '../services/requestsAPI';\nimport DrinkRecomendCard from '../components/DrinkRecomendCard';\nimport '../style/FoodAndDrinkDetails.css';\nimport whiteHeartIcon from \"../images/whiteHeartIcon.svg\";\nimport blackHeartIcon from \"../images/blackHeartIcon.svg\";\nimport shareIcon from \"../images/shareIcon.svg\";\n\nfunction FoodDetails() {\n  const url = document.URL;\n  const actualId = url.split('/')[4];\n  const [foodDetails, setFoodDetails] = useState([]);\n  const [ingredients, setIngredients] = useState('');\n  const [apiResult, setApiResult] = useState([]);\n  const [spanHidden, setSpanHidden] = useState(true);\n  const [favoriteFood, setFavoriteFood] = useState(false);\n  const zero = 0;\n  const six = 6;\n  useEffect(() => {\n    async function fetchData() {\n      const resultsDetails = await requestDetailsFood(actualId);\n      const meal = resultsDetails.meals[0];\n      setFoodDetails(meal);\n      const keysMeal = Object.keys(meal);\n      const filterMeal = keysMeal.filter(key => key.toLowerCase().includes('ingredient'));\n      const filterMeasure = keysMeal.filter(key => key.toLowerCase().includes('measure'));\n      const allIngredients = filterMeal.map((item, index) => ({\n        ingredient: meal[item],\n        measure: meal[filterMeasure[index]]\n      }));\n      console.log(allIngredients);\n      setIngredients(allIngredients);\n    }\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    async function fetchData() {\n      const response = await requestDrinks();\n      setApiResult(response);\n    }\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    const meuLocal = localStorage.getItem('favoriteRecipes');\n    console.log('local2', meuLocal);\n\n    if (meuLocal !== null) {\n      const meuLocalArray = JSON.parse(meuLocal);\n      console.log(meuLocalArray); // const idAtual = actualId[4];\n\n      const findId = meuLocalArray.find(element => element.id === actualId);\n      console.log(findId);\n\n      if (findId !== undefined) {\n        setFavoriteFood(true);\n      }\n    }\n  }, []);\n\n  function handleClick() {\n    localStorage.setItem('hiddenButtonFood', true);\n  }\n\n  function copyToClipBoard(text) {\n    navigator.clipboard.writeText(text);\n    setSpanHidden(false);\n  }\n\n  function handleFavoriteFood() {\n    if (favoriteFood === false) {\n      setFavoriteFood(true);\n      const favoriteObj = [{\n        id: foodDetails.idMeal,\n        type: 'comida',\n        area: foodDetails.strArea,\n        category: foodDetails.strCategory,\n        alcoholicOrNot: '',\n        name: foodDetails.strMeal,\n        image: foodDetails.strMealThumb\n      }];\n\n      if (localStorage.getItem('favoriteRecipes') === null) {\n        localStorage.setItem('favoriteRecipes', JSON.stringify(favoriteObj));\n      } else {\n        localStorage.setItem('favoriteRecipes', JSON.stringify([...JSON.parse(localStorage.getItem('favoriteRecipes')), ...favoriteObj]));\n      }\n    }\n\n    if (favoriteFood === true) {\n      setFavoriteFood(false);\n      const arrayDoStorage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n      console.log(arrayDoStorage);\n      const novoArray = arrayDoStorage.filter(element => element.id !== actualId);\n      console.log(novoArray);\n      localStorage.setItem('favoriteRecipes', JSON.stringify(novoArray));\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"recipe-photo\",\n    width: \"100px\",\n    src: foodDetails.strMealThumb,\n    alt: \"Meal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    \"data-testid\": \"recipe-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, foodDetails.strMeal), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    \"data-testid\": \"share-btn\",\n    onClick: () => copyToClipBoard(document.URL),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: shareIcon,\n    alt: \"Share\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: spanHidden,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, \"Link copiado!\"), /*#__PURE__*/React.createElement(\"button\", {\n    \"aria-label\": \"favorite-button\",\n    type: \"button\",\n    \"data-testid\": \"favorite-btn\",\n    onClick: handleFavoriteFood,\n    src: favoriteFood ? blackHeartIcon : whiteHeartIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"bla\",\n    src: favoriteFood ? blackHeartIcon : whiteHeartIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"h4\", {\n    \"data-testid\": \"recipe-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, foodDetails.strCategory), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"ingredients-div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }\n  }, ingredients && ingredients.map((item, index) => /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": `${index}-ingredient-name-and-measure`,\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 11\n    }\n  }, `${index + 1} ${item.ingredient} - ${item.measure}`))), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }, foodDetails.strInstructions), /*#__PURE__*/React.createElement(\"video\", {\n    \"data-testid\": \"video\",\n    width: \"750\",\n    height: \"500\",\n    controls: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"source\", {\n    src: foodDetails.strYoutube,\n    type: \"video/mp4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"track\", {\n    src: \"\",\n    kind: \"captions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"carousel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }, apiResult.drinks && apiResult.drinks.slice(zero, six).map((element, idx) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"carousel-item\",\n    key: idx,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DrinkRecomendCard, {\n    element: element,\n    idx: idx,\n    key: element.idMeal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(Link, {\n    to: `/comidas/${foodDetails.idMeal}/in-progress`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"start-btn\",\n    \"data-testid\": \"start-recipe-btn\",\n    hidden: localStorage.getItem('hiddenButtonFood'),\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }\n  }, \"Iniciar Receita\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default FoodDetails;","map":{"version":3,"sources":["/home/julia/Trybe/projects_Trybe/sd-06-project-recipes-app/src/pages/FoodDetails.js"],"names":["React","useEffect","useState","Link","requestDetailsFood","requestDrinks","DrinkRecomendCard","FoodDetails","url","document","URL","actualId","split","foodDetails","setFoodDetails","ingredients","setIngredients","apiResult","setApiResult","spanHidden","setSpanHidden","favoriteFood","setFavoriteFood","zero","six","fetchData","resultsDetails","meal","meals","keysMeal","Object","keys","filterMeal","filter","key","toLowerCase","includes","filterMeasure","allIngredients","map","item","index","ingredient","measure","console","log","response","meuLocal","localStorage","getItem","meuLocalArray","JSON","parse","findId","find","element","id","undefined","handleClick","setItem","copyToClipBoard","text","navigator","clipboard","writeText","handleFavoriteFood","favoriteObj","idMeal","type","area","strArea","category","strCategory","alcoholicOrNot","name","strMeal","image","strMealThumb","stringify","arrayDoStorage","novoArray","shareIcon","blackHeartIcon","whiteHeartIcon","strInstructions","strYoutube","drinks","slice","idx"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { requestDetailsFood, requestDrinks } from '../services/requestsAPI';\nimport DrinkRecomendCard from '../components/DrinkRecomendCard';\nimport '../style/FoodAndDrinkDetails.css';\nimport whiteHeartIcon from '../images/whiteHeartIcon.svg';\nimport blackHeartIcon from '../images/blackHeartIcon.svg';\nimport shareIcon from '../images/shareIcon.svg';\n\nfunction FoodDetails() {\n  const url = document.URL;\n  const actualId = url.split('/')[4];\n  const [foodDetails, setFoodDetails] = useState([]);\n  const [ingredients, setIngredients] = useState('');\n  const [apiResult, setApiResult] = useState([]);\n  const [spanHidden, setSpanHidden] = useState(true);\n  const [favoriteFood, setFavoriteFood] = useState(false);\n  const zero = 0;\n  const six = 6;\n\n  useEffect(() => {\n    async function fetchData() {\n      const resultsDetails = await requestDetailsFood(actualId);\n      const meal = resultsDetails.meals[0];\n      setFoodDetails(meal);\n      const keysMeal = Object.keys(meal);\n\n      const filterMeal = keysMeal\n        .filter((key) => key.toLowerCase().includes('ingredient'));\n\n      const filterMeasure = keysMeal\n        .filter((key) => key.toLowerCase().includes('measure'));\n\n      const allIngredients = filterMeal\n        .map((item, index) => ({\n          ingredient: meal[item], measure: meal[filterMeasure[index]],\n        }));\n\n      console.log(allIngredients);\n      setIngredients(allIngredients);\n    }\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    async function fetchData() {\n      const response = await requestDrinks();\n      setApiResult(response);\n    }\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    const meuLocal = localStorage.getItem('favoriteRecipes');\n    console.log('local2', meuLocal);\n    if (meuLocal !== null) {\n      const meuLocalArray = JSON.parse(meuLocal);\n      console.log(meuLocalArray);\n      // const idAtual = actualId[4];\n      const findId = meuLocalArray.find((element) => element.id === actualId);\n      console.log(findId);\n      if (findId !== undefined) {\n        setFavoriteFood(true);\n      }\n    }\n  }, []);\n\n  function handleClick() {\n    localStorage.setItem('hiddenButtonFood', true);\n  }\n\n  function copyToClipBoard(text) {\n    navigator.clipboard.writeText(text);\n    setSpanHidden(false);\n  }\n\n  function handleFavoriteFood() {\n    if (favoriteFood === false) {\n      setFavoriteFood(true);\n      const favoriteObj = [\n        {\n          id: foodDetails.idMeal,\n          type: 'comida',\n          area: foodDetails.strArea,\n          category: foodDetails.strCategory,\n          alcoholicOrNot: '',\n          name: foodDetails.strMeal,\n          image: foodDetails.strMealThumb,\n        },\n      ];\n      if (localStorage.getItem('favoriteRecipes') === null) {\n        localStorage.setItem('favoriteRecipes', JSON.stringify(favoriteObj));\n      } else {\n        localStorage.setItem(\n          'favoriteRecipes',\n          JSON.stringify([\n            ...JSON.parse(localStorage.getItem('favoriteRecipes')),\n            ...favoriteObj,\n          ]),\n        );\n      }\n    }\n    if (favoriteFood === true) {\n      setFavoriteFood(false);\n      const arrayDoStorage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n      console.log(arrayDoStorage);\n\n      const novoArray = arrayDoStorage.filter((element) => element.id !== actualId);\n      console.log(novoArray);\n\n      localStorage.setItem('favoriteRecipes', JSON.stringify(novoArray));\n    }\n  }\n\n  return (\n    <div>\n\n      <img\n        data-testid=\"recipe-photo\"\n        width=\"100px\"\n        src={ foodDetails.strMealThumb }\n        alt=\"Meal\"\n      />\n\n      <h3 data-testid=\"recipe-title\">\n        {foodDetails.strMeal}\n      </h3>\n\n      <button\n        type=\"button\"\n        data-testid=\"share-btn\"\n        onClick={ () => copyToClipBoard(document.URL) }\n      >\n        <img src={ shareIcon } alt=\"Share\" />\n      </button>\n\n      <span hidden={ spanHidden }>Link copiado!</span>\n\n      <button\n        aria-label=\"favorite-button\"\n        type=\"button\"\n        data-testid=\"favorite-btn\"\n        onClick={ handleFavoriteFood }\n        src={ favoriteFood ? blackHeartIcon : whiteHeartIcon }\n      >\n        <img alt=\"bla\" src={ favoriteFood ? blackHeartIcon : whiteHeartIcon } />\n      </button>\n\n      <h4 data-testid=\"recipe-category\">\n        {foodDetails.strCategory}\n      </h4>\n\n      <div id=\"ingredients-div\">\n        {ingredients && ingredients.map((item, index) => (\n          <p\n            data-testid={ `${index}-ingredient-name-and-measure` }\n            key={ index }\n          >\n            {`${index + 1} ${item.ingredient} - ${item.measure}`}\n          </p>\n        ))}\n      </div>\n\n      <p data-testid=\"instructions\">\n        {foodDetails.strInstructions}\n      </p>\n\n      <video data-testid=\"video\" width=\"750\" height=\"500\" controls>\n        <source\n          src={ foodDetails.strYoutube }\n          type=\"video/mp4\"\n        />\n        <track src=\"\" kind=\"captions\" />\n      </video>\n\n      <div className=\"carousel\">\n        { apiResult.drinks && apiResult.drinks.slice(zero, six).map((element, idx) => (\n          <div className=\"carousel-item\" key={ idx }>\n            <DrinkRecomendCard element={ element } idx={ idx } key={ element.idMeal } />\n          </div>\n        )) }\n      </div>\n\n      <Link\n        to={ `/comidas/${foodDetails.idMeal}/in-progress` }\n      >\n        <button\n          type=\"button\"\n          className=\"start-btn\"\n          data-testid=\"start-recipe-btn\"\n          hidden={ localStorage.getItem('hiddenButtonFood') }\n          onClick={ handleClick }\n        >\n          Iniciar Receita\n        </button>\n      </Link>\n      <br />\n      <br />\n      <br />\n    </div>\n  );\n}\n\nexport default FoodDetails;\n"]},"metadata":{},"sourceType":"module"}