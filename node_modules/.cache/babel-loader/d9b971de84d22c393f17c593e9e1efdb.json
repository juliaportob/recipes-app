{"ast":null,"code":"var _jsxFileName = \"/home/julia/Trybe/projects_Trybe/sd-06-project-recipes-app/src/pages/DrinksDetails.js\";\nimport React, { useEffect, useState, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { requestDetailsDrinks, requestFoods } from '../services/requestsAPI';\nimport FoodRecomendCard from '../components/FoodRecomendCard';\nimport RecipesContext from '../context/RecipesContext';\nimport shareIcon from \"../images/shareIcon.svg\";\nimport whiteHeartIcon from \"../images/whiteHeartIcon.svg\";\nimport blackHeartIcon from \"../images/blackHeartIcon.svg\";\nimport '../style/FoodAndDrinkDetails.css';\n\nfunction DrinkDetails() {\n  const url = document.URL;\n  const actualId = url.split('/')[4];\n  const {\n    drinkDetails,\n    setDrinkDetails\n  } = useContext(RecipesContext);\n  const [ingredients, setIngredients] = useState('');\n  const [apiResult, setApiResult] = useState([]);\n  const [buttonText] = useState('Iniciar Receita');\n  const [spanHidden, setSpanHidden] = useState(true);\n  const [favoriteDrink, setFavoriteDrink] = useState(false);\n  const zero = 0;\n  const six = 6;\n  useEffect(() => {\n    async function fetchData() {\n      const resultsDetails = await requestDetailsDrinks(actualId);\n      const drink = resultsDetails.drinks[0];\n      setDrinkDetails(drink);\n      const keysDrink = Object.keys(drink);\n      const filterDrink = keysDrink.filter(key => key.toLowerCase().includes('ingredient'));\n      const filterMeasure = keysDrink.filter(key => key.toLowerCase().includes('measure'));\n      const allIngredients = filterDrink.map((item, index) => ({\n        ingredient: drink[item],\n        measure: drink[filterMeasure[index]]\n      }));\n      setIngredients(allIngredients);\n    }\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    async function fetchData() {\n      const response = await requestFoods();\n      setApiResult(response);\n    }\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    const meuLocal = localStorage.getItem('favoriteRecipes');\n    console.log('local2', meuLocal);\n\n    if (meuLocal !== null) {\n      const meuLocalArray = JSON.parse(meuLocal);\n      console.log(meuLocalArray); // const idAtual = actualId[4];\n\n      const findId = meuLocalArray.find(element => element.id === actualId);\n      console.log(findId);\n\n      if (findId !== undefined) {\n        setFavoriteDrink(true);\n      }\n    }\n  }, []);\n\n  function handleClick() {\n    localStorage.setItem('hiddenButtonFood', true);\n  } // function ttt() {\n  //   if (localStorage.getItem('hiddenButtonDrink') === true) {\n  //     setButtonText('Iniciar Receita');\n  //   } setButtonText('Continuar Receita');\n  // }\n\n\n  function copyToClipBoard(text) {\n    navigator.clipboard.writeText(text);\n    setSpanHidden(false);\n  }\n\n  function handleFavoriteDrink() {\n    if (favoriteDrink === false) {\n      setFavoriteDrink(true);\n      const favoriteObj = [{\n        id: drinkDetails.idDrink,\n        type: 'bebida',\n        area: '',\n        category: drinkDetails.strCategory,\n        alcoholicOrNot: drinkDetails.strAlcoholic,\n        name: drinkDetails.strDrink,\n        image: drinkDetails.strDrinkThumb\n      }];\n\n      if (localStorage.getItem('favoriteRecipes') === null) {\n        localStorage.setItem('favoriteRecipes', JSON.stringify(favoriteObj));\n      } else {\n        localStorage.setItem('favoriteRecipes', JSON.stringify([...JSON.parse(localStorage.getItem('favoriteRecipes')), ...favoriteObj]));\n      }\n    }\n\n    if (favoriteDrink === true) {\n      setFavoriteDrink(false);\n      const arrayDoStorage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n      console.log(arrayDoStorage);\n      const novoArray = arrayDoStorage.filter(element => element.id !== actualId);\n      console.log(novoArray);\n      localStorage.setItem('favoriteRecipes', JSON.stringify(novoArray));\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"recipe-photo\",\n    width: \"100px\",\n    src: drinkDetails.strDrinkThumb,\n    alt: \"Drink\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    \"data-testid\": \"recipe-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, drinkDetails.strDrink), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    \"data-testid\": \"share-btn\",\n    onClick: () => copyToClipBoard(document.URL),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: shareIcon,\n    alt: \"Share\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: spanHidden,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, \"Link copiado!\"), /*#__PURE__*/React.createElement(\"button\", {\n    \"aria-label\": \"favorite-button\",\n    type: \"button\",\n    \"data-testid\": \"favorite-btn\",\n    onClick: handleFavoriteDrink,\n    src: favoriteDrink ? blackHeartIcon : whiteHeartIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"bla\",\n    src: favoriteDrink ? blackHeartIcon : whiteHeartIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"h4\", {\n    \"data-testid\": \"recipe-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, drinkDetails.strAlcoholic), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"ingredients-div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }, ingredients && ingredients.map((item, index) => /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": `${index}-ingredient-name-and-measure`,\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, item.ingredient && item.measure ? `${index + 1} ${item.ingredient} - ${item.measure}` : null))), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }\n  }, drinkDetails.strInstructions), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"carousel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }, apiResult.meals && apiResult.meals.slice(zero, six).map((element, idx) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"carousel-item\",\n    key: idx,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FoodRecomendCard, {\n    element: element,\n    idx: idx,\n    key: element.idMeal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(Link, {\n    to: `/bebidas/${drinkDetails.idDrink}/in-progress`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"start-btn\",\n    \"data-testid\": \"start-recipe-btn\",\n    hidden: localStorage.getItem('hiddenButtonDrink'),\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 9\n    }\n  }, buttonText)), /*#__PURE__*/React.createElement(\"span\", {\n    hidden: spanHidden,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }\n  }, \"Link copiado!\"));\n}\n\nexport default DrinkDetails;","map":{"version":3,"sources":["/home/julia/Trybe/projects_Trybe/sd-06-project-recipes-app/src/pages/DrinksDetails.js"],"names":["React","useEffect","useState","useContext","Link","requestDetailsDrinks","requestFoods","FoodRecomendCard","RecipesContext","DrinkDetails","url","document","URL","actualId","split","drinkDetails","setDrinkDetails","ingredients","setIngredients","apiResult","setApiResult","buttonText","spanHidden","setSpanHidden","favoriteDrink","setFavoriteDrink","zero","six","fetchData","resultsDetails","drink","drinks","keysDrink","Object","keys","filterDrink","filter","key","toLowerCase","includes","filterMeasure","allIngredients","map","item","index","ingredient","measure","response","meuLocal","localStorage","getItem","console","log","meuLocalArray","JSON","parse","findId","find","element","id","undefined","handleClick","setItem","copyToClipBoard","text","navigator","clipboard","writeText","handleFavoriteDrink","favoriteObj","idDrink","type","area","category","strCategory","alcoholicOrNot","strAlcoholic","name","strDrink","image","strDrinkThumb","stringify","arrayDoStorage","novoArray","shareIcon","blackHeartIcon","whiteHeartIcon","strInstructions","meals","slice","idx","idMeal"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { requestDetailsDrinks, requestFoods } from '../services/requestsAPI';\nimport FoodRecomendCard from '../components/FoodRecomendCard';\nimport RecipesContext from '../context/RecipesContext';\nimport shareIcon from '../images/shareIcon.svg';\nimport whiteHeartIcon from '../images/whiteHeartIcon.svg';\nimport blackHeartIcon from '../images/blackHeartIcon.svg';\nimport '../style/FoodAndDrinkDetails.css';\n\nfunction DrinkDetails() {\n  const url = document.URL;\n  const actualId = url.split('/')[4];\n  const { drinkDetails, setDrinkDetails } = useContext(RecipesContext);\n  const [ingredients, setIngredients] = useState('');\n  const [apiResult, setApiResult] = useState([]);\n  const [buttonText] = useState('Iniciar Receita');\n  const [spanHidden, setSpanHidden] = useState(true);\n  const [favoriteDrink, setFavoriteDrink] = useState(false);\n  const zero = 0;\n  const six = 6;\n\n  useEffect(() => {\n    async function fetchData() {\n      const resultsDetails = await requestDetailsDrinks(actualId);\n      const drink = resultsDetails.drinks[0];\n      setDrinkDetails(drink);\n      const keysDrink = Object.keys(drink);\n      const filterDrink = keysDrink\n        .filter((key) => key.toLowerCase().includes('ingredient'));\n      const filterMeasure = keysDrink.filter((key) => key\n        .toLowerCase().includes('measure'));\n      const allIngredients = filterDrink\n        .map((item, index) => ({\n          ingredient: drink[item], measure: drink[filterMeasure[index]],\n        }));\n      setIngredients(allIngredients);\n    }\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    async function fetchData() {\n      const response = await requestFoods();\n      setApiResult(response);\n    }\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    const meuLocal = localStorage.getItem('favoriteRecipes');\n    console.log('local2', meuLocal);\n    if (meuLocal !== null) {\n      const meuLocalArray = JSON.parse(meuLocal);\n      console.log(meuLocalArray);\n      // const idAtual = actualId[4];\n      const findId = meuLocalArray.find((element) => element.id === actualId);\n      console.log(findId);\n      if (findId !== undefined) {\n        setFavoriteDrink(true);\n      }\n    }\n  }, []);\n\n  function handleClick() {\n    localStorage.setItem('hiddenButtonFood', true);\n  }\n\n  // function ttt() {\n  //   if (localStorage.getItem('hiddenButtonDrink') === true) {\n  //     setButtonText('Iniciar Receita');\n  //   } setButtonText('Continuar Receita');\n  // }\n\n  function copyToClipBoard(text) {\n    navigator.clipboard.writeText(text);\n    setSpanHidden(false);\n  }\n\n  function handleFavoriteDrink() {\n    if (favoriteDrink === false) {\n      setFavoriteDrink(true);\n      const favoriteObj = [\n        {\n          id: drinkDetails.idDrink,\n          type: 'bebida',\n          area: '',\n          category: drinkDetails.strCategory,\n          alcoholicOrNot: drinkDetails.strAlcoholic,\n          name: drinkDetails.strDrink,\n          image: drinkDetails.strDrinkThumb,\n        },\n      ];\n      if (localStorage.getItem('favoriteRecipes') === null) {\n        localStorage.setItem('favoriteRecipes', JSON.stringify(favoriteObj));\n      } else {\n        localStorage.setItem(\n          'favoriteRecipes',\n          JSON.stringify([\n            ...JSON.parse(localStorage.getItem('favoriteRecipes')),\n            ...favoriteObj,\n          ]),\n        );\n      }\n    }\n    if (favoriteDrink === true) {\n      setFavoriteDrink(false);\n      const arrayDoStorage = JSON.parse(localStorage.getItem('favoriteRecipes'));\n      console.log(arrayDoStorage);\n      const novoArray = arrayDoStorage.filter((element) => element.id !== actualId);\n      console.log(novoArray);\n      localStorage.setItem('favoriteRecipes', JSON.stringify(novoArray));\n    }\n  }\n\n  return (\n    <div>\n\n      <img\n        data-testid=\"recipe-photo\"\n        width=\"100px\"\n        src={ drinkDetails.strDrinkThumb }\n        alt=\"Drink\"\n      />\n\n      <h3 data-testid=\"recipe-title\">\n        {\n          drinkDetails.strDrink\n        }\n      </h3>\n\n      <button\n        type=\"button\"\n        data-testid=\"share-btn\"\n        onClick={ () => copyToClipBoard(document.URL) }\n      >\n        <img src={ shareIcon } alt=\"Share\" />\n      </button>\n\n      <span hidden={ spanHidden }>Link copiado!</span>\n\n      <button\n        aria-label=\"favorite-button\"\n        type=\"button\"\n        data-testid=\"favorite-btn\"\n        onClick={ handleFavoriteDrink }\n        src={ favoriteDrink ? blackHeartIcon : whiteHeartIcon }\n      >\n        <img alt=\"bla\" src={ favoriteDrink ? blackHeartIcon : whiteHeartIcon } />\n      </button>\n      <h4 data-testid=\"recipe-category\">\n        {drinkDetails.strAlcoholic}\n      </h4>\n\n      <div id=\"ingredients-div\">\n        {ingredients && ingredients\n          .map((item, index) => (\n            <p\n              data-testid={ `${index}-ingredient-name-and-measure` }\n              key={ index }\n            >\n              {\n                item.ingredient && item.measure\n                  ? `${index + 1} ${item.ingredient} - ${item.measure}`\n                  : null\n              }\n            </p>\n          ))}\n      </div>\n\n      <p\n        data-testid=\"instructions\"\n      >\n        {drinkDetails.strInstructions}\n      </p>\n\n      <div className=\"carousel\">\n        { apiResult.meals && apiResult.meals.slice(zero, six).map((element, idx) => (\n          <div className=\"carousel-item\" key={ idx }>\n            <FoodRecomendCard element={ element } idx={ idx } key={ element.idMeal } />\n          </div>\n        ))}\n      </div>\n\n      <Link\n        to={ `/bebidas/${drinkDetails.idDrink}/in-progress` }\n      >\n        <button\n          type=\"button\"\n          className=\"start-btn\"\n          data-testid=\"start-recipe-btn\"\n          hidden={ localStorage.getItem('hiddenButtonDrink') }\n          onClick={ handleClick }\n        >\n          {buttonText}\n        </button>\n      </Link>\n\n      <span hidden={ spanHidden }>Link copiado!</span>\n    </div>\n  );\n}\n\nexport default DrinkDetails;\n"]},"metadata":{},"sourceType":"module"}